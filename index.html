<!DOCTYPE html>
<html>
<head>
    <title>Homie Weather Elite</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; background: #000; color: white; }
        .ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.3); /* Darkens the background so text pops */
            pointer-events: none;
        }
        #temp { font-size: 120px; font-weight: 900; margin: 0; pointer-events: auto; }
        #status { font-size: 24px; margin-bottom: 20px; }
        .wisdom-btn {
            padding: 15px 30px; background: rgba(255,255,255,0.2); border: 2px solid #fff;
            color: white; border-radius: 50px; cursor: pointer; pointer-events: auto;
            backdrop-filter: blur(10px); transition: 0.3s; font-weight: bold;
        }
        .wisdom-btn:hover { background: #fff; color: #000; }
        #quote-display { margin-top: 20px; font-style: italic; max-width: 80%; font-size: 18px; }
    </style>
</head>
<body>

    <div class="ui-layer">
        <p id="temp">--Â°</p>
        <div id="status">Scanning the vibes...</div>
        <button class="wisdom-btn" onclick="showQuote()">GET WISDOM</button>
        <div id="quote-display"></div>
    </div>

    <script>
        let weatherType = 'clear'; // 'clear', 'rain', or 'snow'
        let particles = [];
        const quotes = [
            "Don't stop when you're tired, stop when you're done. ðŸ˜¤",
            "The hustle is beautiful, homie. Keep going. âœ¨",
            "Your only limit is your mind. Break through. ðŸš€",
            "Stay humble, stay hungry. ðŸ’Ž"
        ];

        function showQuote() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('quote-display').innerText = randomQuote;
        }

        async function checkWeather() {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const { latitude, longitude } = pos.coords;
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`);
                const data = await res.json();
                const temp = data.current_weather.temperature;
                const code = data.current_weather.weathercode;

                document.getElementById('temp').innerText = Math.round(temp) + "Â°";

                // Weather Codes: 61, 63, 65 = Rain | 71, 73, 75 = Snow
                if (code >= 61 && code <= 65) weatherType = 'rain';
                else if (code >= 71 && code <= 75) weatherType = 'snow';
                else weatherType = 'clear';

                document.getElementById('status').innerText = (weatherType === 'clear' ? "It's a clear vibe." : "Weather's doing its thing.");
            });
        }

        // P5.js Animation Engine
        function setup() {
            createCanvas(windowWidth, windowHeight);
            for(let i=0; i<100; i++) particles.push(new Particle());
        }

        function draw() {
            if (weatherType === 'clear') background(20, 100, 200); // Blue Sky
            if (weatherType === 'rain') background(30, 30, 50);   // Dark Rain
            if (weatherType === 'snow') background(200, 200, 220); // Bright Snow

            for (let p of particles) {
                p.update();
                p.display();
            }
        }

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = random(width);
                this.y = random(-height, 0);
                this.speed = random(5, 10);
                this.size = random(2, 5);
            }
            update() {
                this.y += this.speed;
                if (this.y > height) this.reset();
            }
            display() {
                noStroke();
                if (weatherType === 'rain') { fill(100, 150, 255); rect(this.x, this.y, 2, 15); }
                if (weatherType === 'snow') { fill(255); ellipse(this.x, this.y, this.size); }
                if (weatherType === 'clear') { fill(255, 255, 100, 50); ellipse(this.x, this.y, this.size * 2); }
            }
        }

        function windowResized() { resizeCanvas(windowWidth, windowHeight); }
        checkWeather();
    </script>
</body>
</html>
